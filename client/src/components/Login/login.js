import React, { useState } from 'react';
import { useMutation } from '@apollo/client';
import { LOGIN_USER } from '../../utils/mutations'
import { Link } from 'react-router-dom';
import Auth from '../../utils/auth'
import "./login.css"

const Login = () => {
  const [formState, setFormState] = useState({ email: '', password: '' });
  const [login, { error }] = useMutation(LOGIN_USER);

  // update state based on form input changes
  const handleChange = (event) => {
    const { name, value } = event.target;

    setFormState({
      ...formState,
      [name]: value,
    });
  };

  // submit form
  const handleFormSubmit = async (event) => {
    event.preventDefault();

    try {
      const { data } = await login({
        variables: { ...formState },
      });

      Auth.login(data.login.token);
    } catch (e) {
      console.error(e);
    }

    // clear form values
    setFormState({
      email: '',
      password: '',
    });
  };
  return (
    <>
    <h1 className="landingPageLogo"> soapbox
    {/* <svg width="154" height="58" viewBox="0 0 154 58" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M151.464 52.9493C150.629 55.1726 148.15 56.2985 145.927 55.4639C143.704 54.6294 142.578 52.1504 143.412 49.9271C144.247 47.7037 146.726 46.5779 148.949 47.4124C151.173 48.247 152.298 50.7259 151.464 52.9493Z" stroke="black" stroke-width="1.4"/>
        <path d="M147.024 12.0469C145.704 15.5629 141.784 17.3433 138.268 16.0236C134.752 14.7038 132.971 10.7836 134.291 7.26763C135.611 3.75163 139.531 1.97122 143.047 3.29098C146.563 4.61075 148.343 8.53091 147.024 12.0469Z" stroke="black" stroke-width="1.4"/>
        <path d="M127.3 19.5C127.3 21.0464 126.046 22.3 124.5 22.3C122.954 22.3 121.7 21.0464 121.7 19.5C121.7 17.9536 122.954 16.7 124.5 16.7C126.046 16.7 127.3 17.9536 127.3 19.5Z" stroke="black" stroke-width="1.4"/>
        <path d="M146.3 35.5C146.3 41.4647 141.465 46.3 135.5 46.3C129.535 46.3 124.7 41.4647 124.7 35.5C124.7 29.5353 129.535 24.7 135.5 24.7C141.465 24.7 146.3 29.5353 146.3 35.5Z" stroke="black" stroke-width="1.4"/>
        <path d="M7.38 45.3C6.1 45.3 4.91 45.09 3.81 44.67C2.71 44.25 1.76 43.61 0.96 42.75L1.8 41.31C2.68 42.13 3.56 42.73 4.44 43.11C5.34 43.47 6.29 43.65 7.29 43.65C8.51 43.65 9.5 43.41 10.26 42.93C11.02 42.43 11.4 41.72 11.4 40.8C11.4 40.18 11.21 39.71 10.83 39.39C10.47 39.05 9.94 38.78 9.24 38.58C8.56 38.36 7.74 38.13 6.78 37.89C5.7 37.59 4.79 37.28 4.05 36.96C3.33 36.62 2.78 36.2 2.4 35.7C2.04 35.18 1.86 34.51 1.86 33.69C1.86 32.67 2.11 31.83 2.61 31.17C3.13 30.49 3.83 29.98 4.71 29.64C5.61 29.28 6.61 29.1 7.71 29.1C8.91 29.1 9.97 29.29 10.89 29.67C11.81 30.05 12.56 30.58 13.14 31.26L12.15 32.64C11.59 32 10.92 31.53 10.14 31.23C9.38 30.91 8.53 30.75 7.59 30.75C6.95 30.75 6.34 30.84 5.76 31.02C5.18 31.18 4.7 31.46 4.32 31.86C3.96 32.24 3.78 32.77 3.78 33.45C3.78 34.01 3.92 34.45 4.2 34.77C4.48 35.07 4.9 35.33 5.46 35.55C6.02 35.75 6.71 35.97 7.53 36.21C8.71 36.53 9.74 36.86 10.62 37.2C11.5 37.52 12.18 37.94 12.66 38.46C13.14 38.98 13.38 39.71 13.38 40.65C13.38 42.11 12.83 43.25 11.73 44.07C10.63 44.89 9.18 45.3 7.38 45.3ZM23.412 45.3C22.292 45.3 21.252 45.09 20.292 44.67C19.352 44.23 18.532 43.64 17.832 42.9C17.152 42.14 16.622 41.28 16.242 40.32C15.862 39.34 15.672 38.31 15.672 37.23C15.672 36.11 15.862 35.07 16.242 34.11C16.622 33.13 17.162 32.27 17.862 31.53C18.562 30.77 19.382 30.18 20.322 29.76C21.282 29.32 22.322 29.1 23.442 29.1C24.562 29.1 25.592 29.32 26.532 29.76C27.472 30.18 28.292 30.77 28.992 31.53C29.692 32.27 30.232 33.13 30.612 34.11C30.992 35.07 31.182 36.11 31.182 37.23C31.182 38.31 30.992 39.34 30.612 40.32C30.232 41.28 29.692 42.14 28.992 42.9C28.312 43.64 27.492 44.23 26.532 44.67C25.592 45.09 24.552 45.3 23.412 45.3ZM17.742 37.26C17.742 38.42 17.992 39.48 18.492 40.44C19.012 41.38 19.702 42.13 20.562 42.69C21.422 43.23 22.372 43.5 23.412 43.5C24.452 43.5 25.402 43.22 26.262 42.66C27.122 42.1 27.812 41.34 28.332 40.38C28.852 39.4 29.112 38.34 29.112 37.2C29.112 36.04 28.852 34.98 28.332 34.02C27.812 33.06 27.122 32.3 26.262 31.74C25.402 31.18 24.452 30.9 23.412 30.9C22.372 30.9 21.422 31.19 20.562 31.77C19.722 32.35 19.042 33.12 18.522 34.08C18.002 35.02 17.742 36.08 17.742 37.26ZM33.3337 40.5C33.3337 39.52 33.6138 38.68 34.1738 37.98C34.7338 37.26 35.5038 36.71 36.4838 36.33C37.4838 35.93 38.6338 35.73 39.9338 35.73C40.6938 35.73 41.4838 35.79 42.3038 35.91C43.1238 36.03 43.8538 36.21 44.4938 36.45V35.13C44.4938 33.81 44.1038 32.76 43.3238 31.98C42.5438 31.2 41.4638 30.81 40.0838 30.81C39.2438 30.81 38.4138 30.97 37.5938 31.29C36.7938 31.59 35.9538 32.04 35.0738 32.64L34.2938 31.2C35.3138 30.5 36.3138 29.98 37.2938 29.64C38.2738 29.28 39.2738 29.1 40.2938 29.1C42.2138 29.1 43.7338 29.65 44.8538 30.75C45.9738 31.85 46.5338 33.37 46.5338 35.31V42.54C46.5338 42.82 46.5938 43.03 46.7138 43.17C46.8338 43.29 47.0238 43.36 47.2838 43.38V45C47.0638 45.02 46.8738 45.04 46.7138 45.06C46.5538 45.08 46.4338 45.08 46.3538 45.06C45.8538 45.04 45.4738 44.88 45.2138 44.58C44.9538 44.28 44.8138 43.96 44.7938 43.62L44.7638 42.48C44.0638 43.38 43.1538 44.08 42.0338 44.58C40.9138 45.06 39.7738 45.3 38.6138 45.3C37.6138 45.3 36.7038 45.09 35.8838 44.67C35.0838 44.23 34.4538 43.65 33.9938 42.93C33.5538 42.19 33.3337 41.38 33.3337 40.5ZM43.8038 41.7C44.0238 41.42 44.1938 41.15 44.3138 40.89C44.4338 40.63 44.4938 40.4 44.4938 40.2V37.92C43.8138 37.66 43.1038 37.46 42.3638 37.32C41.6438 37.18 40.9138 37.11 40.1738 37.11C38.7138 37.11 37.5338 37.4 36.6338 37.98C35.7338 38.56 35.2838 39.35 35.2838 40.35C35.2838 40.93 35.4338 41.48 35.7338 42C36.0338 42.5 36.4738 42.92 37.0538 43.26C37.6338 43.58 38.3138 43.74 39.0938 43.74C40.0738 43.74 40.9838 43.55 41.8238 43.17C42.6838 42.79 43.3438 42.3 43.8038 41.7ZM58.9214 45.3C57.6214 45.3 56.4514 44.96 55.4114 44.28C54.3914 43.6 53.5814 42.76 52.9814 41.76V51.39H50.9414V29.37H52.7714V32.4C53.3914 31.42 54.2214 30.63 55.2614 30.03C56.3014 29.41 57.4114 29.1 58.5914 29.1C59.6714 29.1 60.6614 29.33 61.5614 29.79C62.4614 30.23 63.2414 30.83 63.9014 31.59C64.5614 32.35 65.0714 33.22 65.4314 34.2C65.8114 35.16 66.0014 36.16 66.0014 37.2C66.0014 38.66 65.7014 40.01 65.1014 41.25C64.5214 42.47 63.7014 43.45 62.6414 44.19C61.5814 44.93 60.3414 45.3 58.9214 45.3ZM58.3514 43.5C59.2114 43.5 59.9814 43.33 60.6614 42.99C61.3414 42.63 61.9214 42.15 62.4014 41.55C62.9014 40.95 63.2814 40.28 63.5414 39.54C63.8014 38.78 63.9314 38 63.9314 37.2C63.9314 36.36 63.7814 35.56 63.4814 34.8C63.2014 34.04 62.7914 33.37 62.2514 32.79C61.7114 32.21 61.0914 31.75 60.3914 31.41C59.6914 31.07 58.9314 30.9 58.1114 30.9C57.5914 30.9 57.0514 31 56.4914 31.2C55.9314 31.4 55.3914 31.69 54.8714 32.07C54.3714 32.43 53.9514 32.84 53.6114 33.3C53.2714 33.76 53.0614 34.25 52.9814 34.77V39.57C53.3014 40.31 53.7314 40.98 54.2714 41.58C54.8114 42.16 55.4314 42.63 56.1314 42.99C56.8514 43.33 57.5914 43.5 58.3514 43.5ZM77.107 45.3C75.887 45.3 74.757 44.99 73.717 44.37C72.677 43.73 71.867 42.93 71.287 41.97V45H69.457V23.1H71.497V32.64C72.197 31.58 73.037 30.73 74.017 30.09C74.997 29.43 76.137 29.1 77.437 29.1C78.537 29.1 79.517 29.33 80.377 29.79C81.257 30.25 82.007 30.87 82.627 31.65C83.247 32.41 83.717 33.28 84.037 34.26C84.357 35.22 84.517 36.21 84.517 37.23C84.517 38.33 84.327 39.36 83.947 40.32C83.587 41.28 83.067 42.14 82.387 42.9C81.707 43.64 80.917 44.23 80.017 44.67C79.137 45.09 78.167 45.3 77.107 45.3ZM76.627 43.5C77.467 43.5 78.247 43.33 78.967 42.99C79.687 42.65 80.307 42.18 80.827 41.58C81.347 40.98 81.747 40.31 82.027 39.57C82.307 38.81 82.447 38.03 82.447 37.23C82.447 36.13 82.207 35.1 81.727 34.14C81.267 33.16 80.617 32.38 79.777 31.8C78.957 31.2 77.987 30.9 76.867 30.9C76.067 30.9 75.317 31.08 74.617 31.44C73.937 31.8 73.327 32.28 72.787 32.88C72.267 33.46 71.837 34.1 71.497 34.8V39.66C71.577 40.2 71.787 40.71 72.127 41.19C72.467 41.65 72.887 42.05 73.387 42.39C73.907 42.73 74.447 43 75.007 43.2C75.567 43.4 76.107 43.5 76.627 43.5ZM94.6327 45.3C93.5127 45.3 92.4727 45.09 91.5127 44.67C90.5727 44.23 89.7527 43.64 89.0527 42.9C88.3727 42.14 87.8427 41.28 87.4627 40.32C87.0827 39.34 86.8927 38.31 86.8927 37.23C86.8927 36.11 87.0827 35.07 87.4627 34.11C87.8427 33.13 88.3827 32.27 89.0827 31.53C89.7827 30.77 90.6027 30.18 91.5427 29.76C92.5027 29.32 93.5427 29.1 94.6627 29.1C95.7827 29.1 96.8127 29.32 97.7527 29.76C98.6927 30.18 99.5127 30.77 100.213 31.53C100.913 32.27 101.453 33.13 101.833 34.11C102.213 35.07 102.403 36.11 102.403 37.23C102.403 38.31 102.213 39.34 101.833 40.32C101.453 41.28 100.913 42.14 100.213 42.9C99.5327 43.64 98.7127 44.23 97.7527 44.67C96.8127 45.09 95.7727 45.3 94.6327 45.3ZM88.9627 37.26C88.9627 38.42 89.2127 39.48 89.7127 40.44C90.2327 41.38 90.9227 42.13 91.7827 42.69C92.6427 43.23 93.5927 43.5 94.6327 43.5C95.6727 43.5 96.6227 43.22 97.4827 42.66C98.3427 42.1 99.0327 41.34 99.5527 40.38C100.073 39.4 100.333 38.34 100.333 37.2C100.333 36.04 100.073 34.98 99.5527 34.02C99.0327 33.06 98.3427 32.3 97.4827 31.74C96.6227 31.18 95.6727 30.9 94.6327 30.9C93.5927 30.9 92.6427 31.19 91.7827 31.77C90.9427 32.35 90.2627 33.12 89.7427 34.08C89.2227 35.02 88.9627 36.08 88.9627 37.26ZM105.591 29.37L110.181 35.49L110.421 35.94L110.661 35.49L115.221 29.37H117.531L111.591 37.23L117.531 45H115.221L110.661 38.91L110.421 38.49L110.181 38.91L105.621 45H103.311L109.221 37.23L103.311 29.37H105.591Z" fill="black"/>
        <path d="M128.82 32.689C131.055 27.7771 135.871 27.9974 138 28.7216" stroke="black" stroke-width="0.7"/>
        <path d="M123.334 19.8441C123.231 18.5812 124.179 18.1858 124.666 18.1459" stroke="black" stroke-width="0.3"/>
        <path d="M137.034 11.0159C135.948 7.83575 138.349 6.12884 139.685 5.6729" stroke="black" stroke-width="0.5"/>
        <path d="M145 52C144.854 49.7467 146.589 49.0688 147.475 49.0116" stroke="black" stroke-width="0.3"/>
        </svg> */}
    </h1>
    <main className="aboutLoginMain">
    <section className="aboutSection">
    {/* <h1 className="debateText">Let's debate</h1> */}
    <p className="about">soapbox is a debate platform monitored and regulated by our community.
        We strive to bring forth a safe space for our community members to engage in thought provoking debates with one another.
    </p>
    {/* <AiOutlineDown className="downArrow" size={25} /> */}
</section>

    <section id="login-section">
       <form id="login-form" onSubmit={handleFormSubmit}>
          <div className="login">
            {/* <label htmlFor="chk" aria-hidden="true" className="loginLabel"></label> */}
              <input
                placeholder="Email"
                className="loginEmail"
                name="email"
                type="email"
                id="email"
                value={formState.email}
                onChange={handleChange}
              />
              <input
                placeholder="Password"
                className="loginPassword"
                name="password"
                type="password"
                id="password"
                value={formState.password}
                onChange={handleChange}
              />
              {error && <div className="error">Log in failed</div>}
              <button className="login-button" type="submit">Log in</button>
          <p className="signupLinkText">Don't have an account? <br></br><Link to="/signup" className="link"> Sign up here.</Link></p>
          </div>
       </form>
    </section>
    </main>
    </>
  );
};

export default Login;