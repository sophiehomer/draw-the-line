import React, { useState } from 'react';
import { useMutation } from '@apollo/client';
import { LOGIN_USER } from '../../utils/mutations'
import { Link } from 'react-router-dom';
import Auth from '../../utils/auth'
import "./login.css"

const Login = () => {
  const [formState, setFormState] = useState({ email: '', password: '' });
  const [login, { error }] = useMutation(LOGIN_USER);

  // update state based on form input changes
  const handleChange = (event) => {
    const { name, value } = event.target;

    setFormState({
      ...formState,
      [name]: value,
    });
  };

  // submit form
  const handleFormSubmit = async (event) => {
    event.preventDefault();

    try {
      const { data } = await login({
        variables: { ...formState },
      });

      Auth.login(data.login.token);
    } catch (e) {
      console.error(e);
    }

    // clear form values
    setFormState({
      email: '',
      password: '',
    });
  };
  return (
    <>
    <h1 className="landingPageLogo">
    <svg width="148" height="50" viewBox="0 0 148 50" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M145.464 39.9493C144.629 42.1726 142.15 43.2985 139.927 42.4639C137.704 41.6294 136.578 39.1504 137.412 36.9271C138.247 34.7037 140.726 33.5779 142.949 34.4124C145.173 35.247 146.298 37.7259 145.464 39.9493Z" stroke="black" stroke-width="1.4"/> 
      <path d="M127.024 42.047C125.704 45.563 121.784 47.3434 118.268 46.0236C114.752 44.7039 112.971 40.7837 114.291 37.2677C115.611 33.7517 119.531 31.9713 123.047 33.291C126.563 34.6108 128.343 38.531 127.024 42.047Z" stroke="black" stroke-width="1.4"/>  
      <path d="M127.3 3.50006C127.3 5.04646 126.046 6.30006 124.5 6.30006C122.954 6.30006 121.7 5.04646 121.7 3.50006C121.7 1.95366 122.954 0.700061 124.5 0.700061C126.046 0.700061 127.3 1.95366 127.3 3.50006Z" stroke="black" stroke-width="1.4"/>  
      <path d="M146.3 19.5001C146.3 25.4647 141.465 30.3001 135.5 30.3001C129.535 30.3001 124.7 25.4647 124.7 19.5001C124.7 13.5354 129.535 8.70006 135.5 8.70006C141.465 8.70006 146.3 13.5354 146.3 19.5001Z" stroke="black" stroke-width="1.4"/> 
      <path d="M7.38 29.3001C6.1 29.3001 4.91 29.0901 3.81 28.6701C2.71 28.2501 1.76 27.6101 0.96 26.7501L1.8 25.3101C2.68 26.1301 3.56 26.7301 4.44 27.1101C5.34 27.4701 6.29 27.6501 7.29 27.6501C8.51 27.6501 9.5 27.4101 10.26 26.9301C11.02 26.4301 11.4 25.7201 11.4 24.8001C11.4 24.1801 11.21 23.7101 10.83 23.3901C10.47 23.0501 9.94 22.7801 9.24 22.5801C8.56 22.3601 7.74 22.1301 6.78 21.8901C5.7 21.5901 4.79 21.2801 4.05 20.9601C3.33 20.6201 2.78 20.2001 2.4 19.7001C2.04 19.1801 1.86 18.5101 1.86 17.6901C1.86 16.6701 2.11 15.8301 2.61 15.1701C3.13 14.4901 3.83 13.9801 4.71 13.6401C5.61 13.2801 6.61 13.1001 7.71 13.1001C8.91 13.1001 9.97 13.2901 10.89 13.6701C11.81 14.0501 12.56 14.5801 13.14 15.2601L12.15 16.6401C11.59 16.0001 10.92 15.5301 10.14 15.2301C9.38 14.9101 8.53 14.7501 7.59 14.7501C6.95 14.7501 6.34 14.8401 5.76 15.0201C5.18 15.1801 4.7 15.4601 4.32 15.8601C3.96 16.2401 3.78 16.7701 3.78 17.4501C3.78 18.0101 3.92 18.4501 4.2 18.7701C4.48 19.0701 4.9 19.3301 5.46 19.5501C6.02 19.7501 6.71 19.9701 7.53 20.2101C8.71 20.5301 9.74 20.8601 10.62 21.2001C11.5 21.5201 12.18 21.9401 12.66 22.4601C13.14 22.9801 13.38 23.7101 13.38 24.6501C13.38 26.1101 12.83 27.2501 11.73 28.0701C10.63 28.8901 9.18 29.3001 7.38 29.3001ZM23.412 29.3001C22.292 29.3001 21.252 29.0901 20.292 28.6701C19.352 28.2301 18.532 27.6401 17.832 26.9001C17.152 26.1401 16.622 25.2801 16.242 24.3201C15.862 23.3401 15.672 22.3101 15.672 21.2301C15.672 20.1101 15.862 19.0701 16.242 18.1101C16.622 17.1301 17.162 16.2701 17.862 15.5301C18.562 14.7701 19.382 14.1801 20.322 13.7601C21.282 13.3201 22.322 13.1001 23.442 13.1001C24.562 13.1001 25.592 13.3201 26.532 13.7601C27.472 14.1801 28.292 14.7701 28.992 15.5301C29.692 16.2701 30.232 17.1301 30.612 18.1101C30.992 19.0701 31.182 20.1101 31.182 21.2301C31.182 22.3101 30.992 23.3401 30.612 24.3201C30.232 25.2801 29.692 26.1401 28.992 26.9001C28.312 27.6401 27.492 28.2301 26.532 28.6701C25.592 29.0901 24.552 29.3001 23.412 29.3001ZM17.742 21.2601C17.742 22.4201 17.992 23.4801 18.492 24.4401C19.012 25.3801 19.702 26.1301 20.562 26.6901C21.422 27.2301 22.372 27.5001 23.412 27.5001C24.452 27.5001 25.402 27.2201 26.262 26.6601C27.122 26.1001 27.812 25.3401 28.332 24.3801C28.852 23.4001 29.112 22.3401 29.112 21.2001C29.112 20.0401 28.852 18.9801 28.332 18.0201C27.812 17.0601 27.122 16.3001 26.262 15.7401C25.402 15.1801 24.452 14.9001 23.412 14.9001C22.372 14.9001 21.422 15.1901 20.562 15.7701C19.722 16.3501 19.042 17.1201 18.522 18.0801C18.002 19.0201 17.742 20.0801 17.742 21.2601ZM33.3337 24.5001C33.3337 23.5201 33.6138 22.6801 34.1738 21.9801C34.7338 21.2601 35.5038 20.7101 36.4838 20.3301C37.4838 19.9301 38.6338 19.7301 39.9338 19.7301C40.6938 19.7301 41.4838 19.7901 42.3038 19.9101C43.1238 20.0301 43.8538 20.2101 44.4938 20.4501V19.1301C44.4938 17.8101 44.1038 16.7601 43.3238 15.9801C42.5438 15.2001 41.4638 14.8101 40.0838 14.8101C39.2438 14.8101 38.4138 14.9701 37.5938 15.2901C36.7938 15.5901 35.9538 16.0401 35.0738 16.6401L34.2938 15.2001C35.3138 14.5001 36.3138 13.9801 37.2938 13.6401C38.2738 13.2801 39.2738 13.1001 40.2938 13.1001C42.2138 13.1001 43.7338 13.6501 44.8538 14.7501C45.9738 15.8501 46.5338 17.3701 46.5338 19.3101V26.5401C46.5338 26.8201 46.5938 27.0301 46.7138 27.1701C46.8338 27.2901 47.0238 27.3601 47.2838 27.3801V29.0001C47.0638 29.0201 46.8738 29.0401 46.7138 29.0601C46.5538 29.0801 46.4338 29.0801 46.3538 29.0601C45.8538 29.0401 45.4738 28.8801 45.2138 28.5801C44.9538 28.2801 44.8138 27.9601 44.7938 27.6201L44.7638 26.4801C44.0638 27.3801 43.1538 28.0801 42.0338 28.5801C40.9138 29.0601 39.7738 29.3001 38.6138 29.3001C37.6138 29.3001 36.7038 29.0901 35.8838 28.6701C35.0838 28.2301 34.4538 27.6501 33.9938 26.9301C33.5538 26.1901 33.3337 25.3801 33.3337 24.5001ZM43.8038 25.7001C44.0238 25.4201 44.1938 25.1501 44.3138 24.8901C44.4338 24.6301 44.4938 24.4001 44.4938 24.2001V21.9201C43.8138 21.6601 43.1038 21.4601 42.3638 21.3201C41.6438 21.1801 40.9138 21.1101 40.1738 21.1101C38.7138 21.1101 37.5338 21.4001 36.6338 21.9801C35.7338 22.5601 35.2838 23.3501 35.2838 24.3501C35.2838 24.9301 35.4338 25.4801 35.7338 26.0001C36.0338 26.5001 36.4738 26.9201 37.0538 27.2601C37.6338 27.5801 38.3138 27.7401 39.0938 27.7401C40.0738 27.7401 40.9838 27.5501 41.8238 27.1701C42.6838 26.7901 43.3438 26.3001 43.8038 25.7001ZM58.9214 29.3001C57.6214 29.3001 56.4514 28.9601 55.4114 28.2801C54.3914 27.6001 53.5814 26.7601 52.9814 25.7601V35.3901H50.9414V13.3701H52.7714V16.4001C53.3914 15.4201 54.2214 14.6301 55.2614 14.0301C56.3014 13.4101 57.4114 13.1001 58.5914 13.1001C59.6714 13.1001 60.6614 13.3301 61.5614 13.7901C62.4614 14.2301 63.2414 14.8301 63.9014 15.5901C64.5614 16.3501 65.0714 17.2201 65.4314 18.2001C65.8114 19.1601 66.0014 20.1601 66.0014 21.2001C66.0014 22.6601 65.7014 24.0101 65.1014 25.2501C64.5214 26.4701 63.7014 27.4501 62.6414 28.1901C61.5814 28.9301 60.3414 29.3001 58.9214 29.3001ZM58.3514 27.5001C59.2114 27.5001 59.9814 27.3301 60.6614 26.9901C61.3414 26.6301 61.9214 26.1501 62.4014 25.5501C62.9014 24.9501 63.2814 24.2801 63.5414 23.5401C63.8014 22.7801 63.9314 22.0001 63.9314 21.2001C63.9314 20.3601 63.7814 19.5601 63.4814 18.8001C63.2014 18.0401 62.7914 17.3701 62.2514 16.7901C61.7114 16.2101 61.0914 15.7501 60.3914 15.4101C59.6914 15.0701 58.9314 14.9001 58.1114 14.9001C57.5914 14.9001 57.0514 15.0001 56.4914 15.2001C55.9314 15.4001 55.3914 15.6901 54.8714 16.0701C54.3714 16.4301 53.9514 16.8401 53.6114 17.3001C53.2714 17.7601 53.0614 18.2501 52.9814 18.7701V23.5701C53.3014 24.3101 53.7314 24.9801 54.2714 25.5801C54.8114 26.1601 55.4314 26.6301 56.1314 26.9901C56.8514 27.3301 57.5914 27.5001 58.3514 27.5001ZM77.107 29.3001C75.887 29.3001 74.757 28.9901 73.717 28.3701C72.677 27.7301 71.867 26.9301 71.287 25.9701V29.0001H69.457V7.10006H71.497V16.6401C72.197 15.5801 73.037 14.7301 74.017 14.0901C74.997 13.4301 76.137 13.1001 77.437 13.1001C78.537 13.1001 79.517 13.3301 80.377 13.7901C81.257 14.2501 82.007 14.8701 82.627 15.6501C83.247 16.4101 83.717 17.2801 84.037 18.2601C84.357 19.2201 84.517 20.2101 84.517 21.2301C84.517 22.3301 84.327 23.3601 83.947 24.3201C83.587 25.2801 83.067 26.1401 82.387 26.9001C81.707 27.6401 80.917 28.2301 80.017 28.6701C79.137 29.0901 78.167 29.3001 77.107 29.3001ZM76.627 27.5001C77.467 27.5001 78.247 27.3301 78.967 26.9901C79.687 26.6501 80.307 26.1801 80.827 25.5801C81.347 24.9801 81.747 24.3101 82.027 23.5701C82.307 22.8101 82.447 22.0301 82.447 21.2301C82.447 20.1301 82.207 19.1001 81.727 18.1401C81.267 17.1601 80.617 16.3801 79.777 15.8001C78.957 15.2001 77.987 14.9001 76.867 14.9001C76.067 14.9001 75.317 15.0801 74.617 15.4401C73.937 15.8001 73.327 16.2801 72.787 16.8801C72.267 17.4601 71.837 18.1001 71.497 18.8001V23.6601C71.577 24.2001 71.787 24.7101 72.127 25.1901C72.467 25.6501 72.887 26.0501 73.387 26.3901C73.907 26.7301 74.447 27.0001 75.007 27.2001C75.567 27.4001 76.107 27.5001 76.627 27.5001ZM94.6327 29.3001C93.5127 29.3001 92.4727 29.0901 91.5127 28.6701C90.5727 28.2301 89.7527 27.6401 89.0527 26.9001C88.3727 26.1401 87.8427 25.2801 87.4627 24.3201C87.0827 23.3401 86.8927 22.3101 86.8927 21.2301C86.8927 20.1101 87.0827 19.0701 87.4627 18.1101C87.8427 17.1301 88.3827 16.2701 89.0827 15.5301C89.7827 14.7701 90.6027 14.1801 91.5427 13.7601C92.5027 13.3201 93.5427 13.1001 94.6627 13.1001C95.7827 13.1001 96.8127 13.3201 97.7527 13.7601C98.6927 14.1801 99.5127 14.7701 100.213 15.5301C100.913 16.2701 101.453 17.1301 101.833 18.1101C102.213 19.0701 102.403 20.1101 102.403 21.2301C102.403 22.3101 102.213 23.3401 101.833 24.3201C101.453 25.2801 100.913 26.1401 100.213 26.9001C99.5327 27.6401 98.7127 28.2301 97.7527 28.6701C96.8127 29.0901 95.7727 29.3001 94.6327 29.3001ZM88.9627 21.2601C88.9627 22.4201 89.2127 23.4801 89.7127 24.4401C90.2327 25.3801 90.9227 26.1301 91.7827 26.6901C92.6427 27.2301 93.5927 27.5001 94.6327 27.5001C95.6727 27.5001 96.6227 27.2201 97.4827 26.6601C98.3427 26.1001 99.0327 25.3401 99.5527 24.3801C100.073 23.4001 100.333 22.3401 100.333 21.2001C100.333 20.0401 100.073 18.9801 99.5527 18.0201C99.0327 17.0601 98.3427 16.3001 97.4827 15.7401C96.6227 15.1801 95.6727 14.9001 94.6327 14.9001C93.5927 14.9001 92.6427 15.1901 91.7827 15.7701C90.9427 16.3501 90.2627 17.1201 89.7427 18.0801C89.2227 19.0201 88.9627 20.0801 88.9627 21.2601ZM105.591 13.3701L110.181 19.4901L110.421 19.9401L110.661 19.4901L115.221 13.3701H117.531L111.591 21.2301L117.531 29.0001H115.221L110.661 22.9101L110.421 22.4901L110.181 22.9101L105.621 29.0001H103.311L109.221 21.2301L103.311 13.3701H105.591Z" fill="black"/> 
      <path d="M128.82 16.6891C131.055 11.7772 135.871 11.9975 138 12.7216" stroke="black" stroke-width="0.7"/> 
      <path d="M123.334 3.84418C123.231 2.58131 124.179 2.18584 124.666 2.14596" stroke="black" stroke-width="0.3"/>  
      <path d="M117.357 41.343C116.271 38.1628 118.672 36.4559 120.008 36" stroke="black" stroke-width="0.5"/>  
      <path d="M139.182 38.9884C139.036 36.7351 140.771 36.0573 141.657 36" stroke="black" stroke-width="0.3"/>
    </svg>
    </h1>
    <main className="aboutLoginMain">
    <section className="aboutSection">
    {/* <h1 className="debateText">Let's debate</h1> */}
    <p className="about">soapbox is a debate platform monitored and regulated by our community.
        We strive to bring forth a safe space for our community members to engage in thought provoking debates with one another.
    </p>
    {/* <AiOutlineDown className="downArrow" size={25} /> */}
</section>

    <section id="login-section">
       <form id="login-form" onSubmit={handleFormSubmit}>
          <div className="login">
            {/* <label htmlFor="chk" aria-hidden="true" className="loginLabel"></label> */}
              <input
                placeholder="Email"
                className="loginEmail"
                name="email"
                type="email"
                id="email"
                value={formState.email}
                onChange={handleChange}
              />
              <input
                placeholder="Password"
                className="loginPassword"
                name="password"
                type="password"
                id="password"
                value={formState.password}
                onChange={handleChange}
              />
              {error && <div className="error">Log in failed</div>}
              <button className="login-button" type="submit">Log in</button>
          <p className="signupLinkText">Don't have an account? <br></br><Link to="/signup" className="link"> Sign up here.</Link></p>
          </div>
       </form>
    </section>
    </main>
    </>
  );
};

export default Login;